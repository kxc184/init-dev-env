"use strict";(self.webpackChunkws_workbench=self.webpackChunkws_workbench||[]).push([[8442],{56093:(e,t,s)=>{s.d(t,{Ax:()=>b,BS:()=>d,Bg:()=>X,D6:()=>x,Ey:()=>F,Fx:()=>W,GP:()=>v,HB:()=>Z,HI:()=>q,I0:()=>P,JD:()=>p,JW:()=>l,MZ:()=>H,NI:()=>R,OX:()=>_,Pk:()=>y,Re:()=>N,TK:()=>D,Ui:()=>E,Uw:()=>J,Zs:()=>C,aS:()=>I,fv:()=>m,gT:()=>M,gY:()=>j,gf:()=>f,hD:()=>V,hY:()=>B,nm:()=>c,pU:()=>z,rr:()=>K,tg:()=>A,up:()=>$,v9:()=>U,vi:()=>S,wf:()=>u,wr:()=>O,y_:()=>G});var r=s(38725),a=s(94690),n=s(35482),i=s(38394),o=s(24867);const l="idle",c="connected",d="connecting",u="reconnecting",m="disconnecting",p="connect",h="disconnect",g="cancel",y={[l]:p,[d]:g,[c]:h,[m]:p,[u]:h},v={[p]:{label:"Connect",handler:"connect"},[h]:{label:"Disconnect",handler:"disconnect"},[g]:{label:"Cancel",handler:"disconnect"}},b={OUTGOING:"outgoing",INCOMING:"incoming",CONNECTED:"meta_connected",DISCONNECTED:"meta_disconnected",RECONNECTING:"meta_reconnecting",ABORT:"meta_abort",ERROR:"meta_error",HIDDEN:"hidden",ALL:"all"},x={[l]:{label:"Disconnected",type:"critical"},[d]:{label:"Connecting",type:"info"},[c]:{label:"Connected",type:"success"},[m]:{label:"Disconnecting",type:"info"},[u]:{label:"Reconnecting",type:"info"}},f="text/plain",w="text/html",S="application/json",T="application/xml",k="application/octet-stream",j=new Set([f,w,S,T,"application/javascript"]),M={handshakeTimeout:0,retryCount:0,retryDelay:5e3,maxPayload:10},C={1e3:{code:1e3,name:"Normal Closure",description:"Connection was closed successfully."},1001:{code:1001,name:"Going Away",description:"Either because of a server failure or because the client is navigating away."},1002:{code:1002,name:"Protocol Error",description:"Endpoint terminated the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"Endpoint received data of a type it cannot accept."},1005:{code:1005,name:"No Status Received",description:"Missing status code even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"No close frame was received."},1007:{code:1007,name:"Invalid Frame",description:"Endpoint received inconsistent data."},1008:{code:1008,name:"Policy Violation",description:"Endpoint received a message that violates its policy."},1009:{code:1009,name:"Message too big",description:"Endpoint received a data frame that was too large."},1010:{code:1010,name:"Missing Extension",description:"Server did not negotiate one or more extension expected by client."},1011:{code:1011,name:"Server Error",description:"Internal server error while operating."},1012:{code:1012,name:"Service Restart",description:"Server is restarting."},1013:{code:1013,name:"Try Again Later",description:"Temporary server error while operating."},1014:{code:1014,name:"Bad Gateway",description:"Server acting as gateway received an invalid response."},1015:{code:1015,name:"TLS Handshake",description:"Failure while performing the TLS handshake."},unknown:(e,t)=>({code:e||"Unknown",name:"Error",description:t||"Connection was closed due to an unknown error."})},I=1e3,N={[b.OUTGOING]:{Icon:r.Z,color:"content-color-warning",backgroundColor:"background-color-warning",size:"small"},[b.INCOMING]:{Icon:a.Z,color:"content-color-info",backgroundColor:"background-color-info",size:"small"},[b.ERROR]:{Icon:n.Z,color:"content-color-error",size:"large"},[b.CONNECTED]:{Icon:i.Z,color:"content-color-success",size:"large"},[b.RECONNECTING]:{Icon:o.Z,color:"content-color-primary",size:"large"},[b.ABORT]:{Icon:o.Z,color:"content-color-primary",size:"large"},[b.DISCONNECTED]:e=>e?{Icon:o.Z,color:"content-color-primary",size:"large"}:{Icon:n.Z,color:"content-color-error",size:"large"},default:{Icon:o.Z,color:"content-color-primary",size:"large"}},E={Ready:"ready",Loading:"loading",Error:"error",Empty:"empty",Truncated:"truncated"},R="jump-to-latest",A="new-messages";let O=function(e){return e.TEXT="text",e.POSTMAN_JSON="postman_json",e.JSON="json",e.XML="xml",e.HTML="html",e.HEXDUMP="hexdump",e.VIDEO="video",e.AUDIO="audio",e.IMAGE="image",e.BINARY="binary",e}({}),Z=function(e){return e.BASE64="base64",e.HEX="hex",e}({});const _={[f]:O.TEXT,[w]:O.HTML,[S]:O.POSTMAN_JSON,[T]:O.XML,[k]:O.HEXDUMP},P={[b.OUTGOING]:"Sent Messages",[b.INCOMING]:"Received Messages",addSeparator:!0,[b.ALL]:"All Messages"},H=new Set([O.VIDEO,O.AUDIO,O.IMAGE]),D=200,q={RAW:"ws-raw-request",SOCKETIO:"ws-socketio-request"},L={[q.RAW]:"Raw",[q.SOCKETIO]:"Socket.IO"},z={noPermission:"You don't have permission to connect with a WebSocket server in this workspace.",notMember:"Only workspace members can connect with a WebSocket server. Join this workspace to complete this action.",emptyURL:"Please enter the server URL",nonWsAgent:"Switch to Postman Desktop Agent to connect with a WebSocket server.",agentNotConnected:"Make sure the Desktop Agent is installed and running.",oldAgent:e=>`Youâ€™re using an older version of Postman Desktop Agent which does not support ${L[e]} WebSocket requests. Update the Desktop Agent and try again.`},U={[O.TEXT]:"Text",[O.POSTMAN_JSON]:"JSON",[O.XML]:"XML",[O.HTML]:"HTML",[O.BINARY]:"Binary",[Z.BASE64]:"Base64",[Z.HEX]:"Hexadecimal"},F={[O.TEXT]:f,[O.HTML]:w,[O.POSTMAN_JSON]:S,[O.XML]:T,[O.BINARY]:k},B=[{id:"handshakeTimeout",title:"Handshake request timeout",inputFieldType:"input",inputType:"number",defaultValue:0,description:"Set how long the handshake request should wait before timing out in milliseconds. To never time out, set to 0.",summary:"How long the handshake request will wait before timing out in milliseconds."},{id:"retryCount",title:"Reconnection attempts",inputFieldType:"input",inputType:"number",defaultValue:0,description:"Maximum reconnection attempts when the connection closes abruptly.",summary:"Maximum reconnection attempts when the connection closes abruptly."},{id:"retryDelay",title:"Reconnection intervals",inputFieldType:"input",inputType:"number",defaultValue:5e3,description:"Interval between each reconnection attempt in milliseconds.",summary:"Interval between each reconnection attempt in milliseconds."},{id:"maxPayload",title:"Maximum message size",inputFieldType:"input",inputType:"number",defaultValue:10,description:"Maximum allowed message size in MB. To receive messages of any size, set to 0.",summary:"Maximum allowed message size in MB."}],W={[b.CONNECTED]:"connected",[b.DISCONNECTED]:"disconnected",[b.ERROR]:"error",[b.RECONNECTING]:"reconnecting",[b.ABORT]:"aborted",[b.OUTGOING]:"sent-message",[b.INCOMING]:"received-message"},G=Object.entries(W).reduce(((e,[t,s])=>(e[s]=t,e)),{}),$={section:"Connection Details",dataFields:[{key:"connectedOn",label:"Connected"},{label:"Protocol",key:"protocol"},{label:"Extensions",key:"extensions"}]},J="editor",X="iframe",V={[J]:j,[X]:H},K=2},58442:(e,t,s)=>{s.d(t,{Z:()=>da});var r=s(40540),a=s.n(r),n=s(25892),i=s.n(n),o=s(60607),l=s(58560),c=s(25637),d=s(7560),u=s(80814),m=s(15761),p=s(27366),h=s(71132),g=s(27162),y=s(5246),v=s(50916),b=s(43353),x=s(62932),f=s(48722),w=s(38095),S=s.n(w),T=s(32940),k=s(24926),j=s(56093);let M=function(e){return e.TEXT="text",e.POSTMAN_JSON="postman_json",e.JSON="json",e.XML="xml",e.HTML="html",e.HEXDUMP="hexdump",e.VIDEO="video",e.AUDIO="audio",e.IMAGE="image",e.BINARY="binary",e}({}),C=function(e){return e.BASE64="base64",e.HEX="hex",e}({});var I=s(6790),N=s(42323),E=s(99765);function R(e){return null==e}const A={caps:"upper",format:"twos"};function O(e,t,s){if(!e)throw new Error("WebSocketRequestHelper~createMessage: Cannot create message without type");const r={id:(0,f.v4)(),type:e,meta:{},payload:{}};return s&&(r.meta=s),!R(t)&&(r.payload=t),r}function Z(e,{message:t,mimeType:s,url:r}){const a=null==s?void 0:s.split("/")[0].toLowerCase();switch(e){case j.Ax.CONNECTED:return`Connected to ${r}`;case j.Ax.DISCONNECTED:return`Disconnected from ${r}`;case j.Ax.RECONNECTING:return`Reconnecting to ${r}`;case j.Ax.ABORT:return"Connection aborted";case j.Ax.ERROR:return`Could not connect to ${r}`;case j.Ax.INCOMING:case j.Ax.OUTGOING:return R(t)&&R(s)||!t?{text:"(empty)",placeholder:!0}:j.MZ.has(a)?{text:(n=a,n?n.split(" ").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)+" "),""):""),placeholder:!0,truncated:!1}:"string"==typeof t&&s&&j.gY.has(s)?{text:t.slice(0,j.TK),placeholder:!1,truncated:t.length>j.TK}:{text:"Binary",placeholder:!0,truncated:!1};default:return""}var n}function _(e){return!e||!(!Array.isArray(e)||0!==e.length)||"object"==typeof e&&0===Object.keys(e).length}function P(e){return null==e?void 0:e.reduce(((e,t)=>{if(!t.key||!1===t.enabled)return e;const s=t.key;return Array.isArray(e[s])?e[s].push(t.value):e[s]?e[s]=[e[s],t.value]:e[t.key]=t.value,e}),{})}function H(e){const t=Object.keys(e);for(let r=t.length-1;r>=0;r--){var s;if("sec-websocket-protocol"===(null==(s=t[r])?void 0:s.toLowerCase()))return e[t[r]]}}function D(e){const t=j.hY.reduce(((e,t)=>(e[t.id]=t.defaultValue,e)),{}),s=(0,d.Z)({},t,e);return s.maxPayload*=1048576,s}function q(e,t){const s={};return e&&!R(e.href)&&(s["Request URL"]=e.href),e&&!R(e.method)&&(s["Request Method"]=e.method),t&&!R(t.statusCode)&&(s["Status Code"]=`${t.statusCode} ${t.statusMessage}`),e&&!R(e.headers)&&(s["Request Headers"]=P(e.headers)),t&&!R(t.headers)&&(s["Response Headers"]=P(t.headers)),_(s)?null:s}var L=s(72586),z=s.n(L);class U{constructor(e,t){this.messages=void 0,this.streamStatus=void 0,this.expandedMessagesSet=void 0,this.messageTypeFilter=void 0,this.messageInputFilter=void 0,this.firstVisibleMessageIndex=void 0,this.selectedMessagesSet=void 0,this.reset=()=>{this.messages=[],this.setStreamStatus(j.Ui.Empty),this.expandedMessagesSet=new Set,this.messageTypeFilter=j.Ax.ALL,this.messageInputFilter="",this.firstVisibleMessageIndex=0},this.addMessage=e=>{e&&this.messages.push(e)},this.setStreamStatus=e=>{this.streamStatus=e},this.toggleMessageExpanded=e=>{this.expandedMessagesSet.has(e)?this.expandedMessagesSet.delete(e):this.expandedMessagesSet.add(e)},this.isMessageExpanded=e=>this.expandedMessagesSet.has(e),this.hideAllMessages=()=>{this.firstVisibleMessageIndex+=this.visibleMessages.length},this.restoreAllMessages=()=>{this.firstVisibleMessageIndex=0},this.setMessageTypeFilter=e=>{this.messageTypeFilter=e},this.setMessageInputFilter=e=>{this.messageInputFilter=e},this.toggleMessageSelected=e=>{this.selectedMessagesSet.has(e)?this.selectedMessagesSet.delete(e):this.selectedMessagesSet.add(e)},this.isMessageSelected=e=>this.selectedMessagesSet.has(e),this.deselectAllMessages=()=>{this.selectedMessagesSet.clear()},this.messages=e,this.streamStatus=t,this.expandedMessagesSet=new Set,this.messageTypeFilter=j.Ax.ALL,this.messageInputFilter="",this.firstVisibleMessageIndex=0,this.selectedMessagesSet=new Set,(0,x.makeObservable)(this,{messages:x.observable,streamStatus:x.observable,reset:x.action,addMessage:x.action,setStreamStatus:x.action,expandedMessagesSet:x.observable,toggleMessageExpanded:x.action,messageTypeFilter:x.observable,setMessageTypeFilter:x.action,filteredMessagesByType:x.computed,visibleMessages:x.computed,messageInputFilter:x.observable,setMessageInputFilter:x.action,filteredMessagesByInputAndType:x.computed,messagesToShow:x.computed,firstVisibleMessageIndex:x.observable,hideAllMessages:x.action,restoreAllMessages:x.action,isFilterApplied:x.computed,hasMessagesToRestore:x.computed,selectedMessagesSet:x.observable,selectedMessageDetailsList:x.computed,toggleMessageSelected:x.action,deselectAllMessages:x.action})}get visibleMessages(){return this.messages.slice(this.firstVisibleMessageIndex)}get filteredMessagesByType(){return this.messageTypeFilter===j.Ax.ALL?this.visibleMessages:new(z())(this.visibleMessages,["type"]).search(this.messageTypeFilter)}get filteredMessagesByInputAndType(){return this.messageInputFilter?new(z())(this.filteredMessagesByType,["payload","meta.preview"]).search(this.messageInputFilter):this.filteredMessagesByType}get isFilterApplied(){return this.messageInputFilter||this.messageTypeFilter!==j.Ax.ALL}get hasMessagesToRestore(){return 0!==this.firstVisibleMessageIndex}get messagesToShow(){return!this.isFilterApplied&&this.hasMessagesToRestore?[{type:j.Ax.HIDDEN},...this.filteredMessagesByInputAndType]:this.filteredMessagesByInputAndType}get selectedMessagesCount(){return this.selectedMessagesSet.size}get selectedMessageDetailsList(){const e=[];for(const t of this.selectedMessagesSet){const s=this.messages.find((e=>e.id===t));s&&e.push(s)}return e}}const F=e=>{if(void 0===e||null==e||!e.includes("?"))return[];let t;try{var s;t=new URL(e,null==(s=globalThis.location)?void 0:s.origin).searchParams}catch(e){return[]}return[...t.entries()].map((([e,t])=>({key:e,value:t,enabled:!0,description:""})))};class B{constructor(e,t=F(e)){this.queryParameters=void 0,this.url=void 0,this.url=e,this.queryParameters=x.observable.array(t),(0,x.makeObservable)(this,{queryParameters:!0,url:x.observable,setUrl:x.action,queryParams:x.computed,updateQueryParams:x.action,updateUrlFromQueryParams:x.action,updateQueryParamsFromUrl:x.action})}get queryParams(){return this.queryParameters}updateQueryParams(e){this.queryParameters=e,this.updateUrlFromQueryParams()}updateUrlFromQueryParams(){const e=new URLSearchParams(this.queryParameters.filter((e=>e.enabled)).map((e=>[e.key,void 0!==e.value?e.value:""]))).toString();null!=this.url||(this.url=""),this.url=this.url.replace(/([^?]*)?(.*)/,`$1?${e}`)}updateQueryParamsFromUrl(){const e=F(this.url);this.queryParameters=e.map(((e,t)=>{var s;return this.queryParameters.length>t?(0,d.Z)({},e,{enabled:null!=(s=this.queryParameters[t].enabled)?s:e.enabled,description:this.queryParameters[t].description||e.description}):e}))}setUrl(e){this.url=e,this.updateQueryParamsFromUrl()}}class W{constructor(){this.message=void 0,this.activeType=void 0,this.activeSubType=void 0,this.setMessage=e=>{this.message=e},this.setActiveType=e=>{this.activeType=e},this.setActiveSubType=e=>{this.activeSubType=e},this.message="",this.activeType=M.TEXT,this.activeSubType=C.BASE64,(0,x.makeObservable)(this,{message:x.observable,activeType:x.observable,activeSubType:x.observable,setMessage:x.action,setActiveType:x.action,setActiveSubType:x.action})}}var G=s(89539),$=s(38879);const J={"sec-websocket-version":{infoTitle:"This header was automatically added",info:"The Sec-WebSocket-Version header field is used in the WebSocket opening handshake. It is sent from the client to the server to indicate the protocol version of the connection. This enables servers to correctly interpret the opening handshake and subsequent data being sent from the data, and close the connection if the server cannot interpret that data in a safe manner."},"sec-websocket-key":{infoTitle:"This header was automatically added",info:"The Sec-WebSocket-Key header field is used in the WebSocket opening handshake. It is sent from the client to the server to provide part of the information used by the server to prove that it received a valid WebSocket opening handshake. This helps ensure that the server does not accept connections from non-WebSocket clients (e.g., HTTP clients) that are being abused to send data to unsuspecting WebSocket servers."},"sec-websocket-extensions":{infoTitle:"This header was automatically added",info:"The Sec-WebSocket-Extensions header field is used in the WebSocket opening handshake. It is initially sent from the client to the server, and then subsequently sent from the server to the client, to agree on a set of protocol-level extensions to use for the duration of the connection."},upgrade:{infoTitle:"This header was automatically added",info:"The WebSocket handshake uses the HTTP Upgrade header to change from the HTTP protocol to the WebSocket protocol."},host:{infoTitle:"This header was automatically added",info:"The Host request-header field specifies the Internet host and port number of the resource being requested, as obtained from the original URI."},connection:{infoTitle:"This header was automatically added",info:"The Connection general-header field allows the sender to specify options that are desired for that particular connection."}};var X=(0,$.Z)("previewHeaders");class V{constructor(e){this.userHeaders=void 0,Object.defineProperty(this,X,{writable:!0,value:void 0}),this.previewHeadersHidden=void 0,this.setUserHeaders=e=>{this.userHeaders=e},this.setPreviewHeadersHidden=e=>{this.previewHeadersHidden=e},this.userHeaders=x.observable.array(e),(0,G.Z)(this,X)[X]=[{enabled:!0,key:"Host",system:!0,value:"<calculated at runtime>"},{enabled:!0,key:"Connection",system:!0,value:"Upgrade"},{enabled:!0,key:"Upgrade",system:!0,value:"websocket"},{enabled:!0,key:"Sec-WebSocket-Key",system:!0,value:"<calculated at runtime>"},{enabled:!0,key:"Sec-WebSocket-Version",system:!0,value:"13"},{enabled:!0,key:"Sec-WebSocket-Extensions",system:!0,value:"permessage-deflate; client_max_window_bits"}],this.previewHeadersHidden=!0,(0,x.makeObservable)(this,{userHeaders:x.observable,setUserHeaders:x.action,headers:x.computed,setHeaders:x.action,previewHeadersHidden:x.observable,setPreviewHeadersHidden:x.action})}get previewHeaders(){var e;return null==(e=(0,G.Z)(this,X)[X])?void 0:e.map((e=>{var t;if(!e)return;const s=null==(t=e.key)?void 0:t.toLowerCase(),{info:r,infoTitle:a}=J[s]||{};return Object.assign({info:r,infoTitle:a,disableEdit:!0},e,{allowedToToggle:!1,previewSettingsLink:null})}))}get headers(){return[...this.previewHeaders,...this.userHeaders]}setHeaders(e){const t=[];for(const s of e)s.system||t.push(s);this.setUserHeaders(t)}}var K=s(92465);const Y=e=>Object.entries(e).map((([e,t])=>({key:e,value:t}))),Q=e=>null==e?void 0:e.reduce(((e,{key:t,value:s})=>(0,d.Z)({},e,{[t]:s})),{}),ee=e=>{var t;const s=null==e||null==(t=e.payload)?void 0:t.handshakeDetails;let r="",a=null;if(null!=s&&s["Status Code"]){const e=s["Status Code"].split(" ");a=Number.parseInt(e[0],10),r=e.slice(1).join(" ")}return(0,d.Z)({},s?(0,d.Z)({handshakeRequest:{method:s["Request Method"],headers:Y(s["Request Headers"]),url:s["Request URL"]}},a&&s["Response Headers"]?{handshakeResponse:{statusCode:a,statusMessage:r,headers:Y(s["Response Headers"])}}:{}):{})};function te(e){var t,s,r,a,n,i;const o={timestamp:null==(t=e.meta)?void 0:t.time,payload:{}};return o.payload=(0,d.Z)({data:se(e.payload)},null!=(s=e.meta)&&s.mimeType?{mimeType:e.meta.mimeType}:{},{size:(null==(r=e.meta)?void 0:r.size)||0},null!=(a=e.meta)&&a.fileExtension?{fileExtension:e.meta.fileExtension}:{},null!=(n=e.meta)&&n.eventName?{eventName:null==(i=e.meta)?void 0:i.eventName}:{}),o}function se(e){let t=e&&e.constructor.name;if(!t)return{payload:"",type:"String"};const s={type:t,payload:""};switch(t){case"Uint8Array":e=function(e){let t="";for(let s=0,r=e.length;s<r;s++)t+=String.fromCodePoint(e[s]);return t}(e);break;case"Object":e=JSON.stringify(e);break;default:e=String(e),t="String"}return s.payload=e,s}function re(e,{url:t},s){try{const r=function({payload:e,type:t}){if(t)switch(t){case"Uint8Array":return function(e){const t=new Uint8Array(e.length);for(let s=0,r=e.length;s<r;s++)t[s]=e.codePointAt(s);return t}(e);case"Object":return JSON.parse(e);default:return String(e)}}(e.payload.data),a=Z(s,{message:r,url:t,mimeType:e.payload.mimeType});return{type:s,meta:{time:e.timestamp,mimeType:e.payload.mimeType,size:e.payload.size,eventName:e.payload.eventName,fileExtension:e.payload.fileExtension,preview:a},payload:r}}catch(e){return{}}}const ae=e=>{const{handshakeRequest:t,handshakeResponse:s}=e,r=null==t?void 0:t.url,a=null==t?void 0:t.method,n=null==s?void 0:s.statusCode,i=null==s?void 0:s.statusMessage,o=Q(null==t?void 0:t.headers),l=Q(null==s?void 0:s.headers);if(r||a||n||o||l)return(0,d.Z)({"Request URL":r,"Request Method":a},n?{"Status Code":`${n} ${i}`}:{},o?{"Request Headers":o}:{},l?{"Response Headers":l}:{})},ne={[j.Ax.CONNECTED]:e=>{var t;const s={type:j.Fx[e.type],timestamp:null==(t=e.meta)?void 0:t.time,payload:{}};return s.payload=ee(e),s},[j.Ax.DISCONNECTED]:(e,t)=>{var s,r;const a={type:j.Fx[e.type],timestamp:null==(s=e.meta)?void 0:s.time,payload:{}},n=e.payload||{};return a.payload=(0,d.Z)({},n.code?{code:n.code}:{},{reason:n.name}),1e3===n.code?t&&(t.result="success"):[1002,1003,1005,1006,1007,1008,1009,1010].includes(n.code)?t&&(t.result="client-error"):[1001,1011,1012,1013,1014,1015].includes(n.code)&&t&&(t.result="server-error"),t&&(t.summary=(null==(r=j.Zs[n.code])?void 0:r.name)||"Error"),a},[j.Ax.ERROR]:(e,t)=>{var s,r;const a={type:j.Fx[e.type],timestamp:null==(s=e.meta)?void 0:s.time,payload:{}},n=null==e||null==(r=e.payload)?void 0:r.error;return a.payload=(0,d.Z)({},n?{error:{message:n}}:{},ee(e)),n&&t&&(t.result="client-error",t.summary=n),a},[j.Ax.RECONNECTING]:e=>{var t;return{type:j.Fx[e.type],timestamp:null==(t=e.meta)?void 0:t.time,payload:{}}},[j.Ax.ABORT]:(e,t)=>{var s;const r={type:j.Fx[e.type],timestamp:null==(s=e.meta)?void 0:s.time,payload:{}};return t&&(t.summary="aborted"),r}},ie=(0,d.Z)({},ne,{[j.Ax.INCOMING]:te,[j.Ax.OUTGOING]:te}),oe={connected:(e,{url:t})=>{const s=j.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"application/json",preview:Z(s,{url:t})},payload:{handshakeDetails:ae(e.payload)}}},disconnected:(e,{url:t})=>{const s=j.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"text/plain",preview:Z(s,{url:t})},payload:{code:e.payload.code,name:e.payload.reason,description:(r=e.payload,(null==(a=j.Zs[r.code])?void 0:a.description)||j.Zs.unknown(r.code,"Error"!==r.reason?r.reason:"").description)}};var r,a},error:(e,{url:t})=>{const s=j.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"application/json",preview:Z(s,{url:t})},payload:{error:e.payload.error.message,handshakeDetails:ae(e.payload)}}},reconnecting:(e,{url:t})=>{const s=j.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"text/plain",preview:Z(s,{url:t})}}},aborted:(e,{url:t})=>{const s=j.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"text/plain",preview:Z(s,{url:t})}}}},le=(0,d.Z)({},oe,{"sent-message":re,"received-message":re});function ce(e){return e.map((e=>{const t={key:e.key,value:e.value,description:"",disabled:!1};return!1===e.enabled&&(t.disabled=!0),e.description&&(t.description=e.description),t}))}function de(e){return e.map((e=>{const t={key:e.key,value:e.value,description:"",enabled:!0};return t.enabled=!e.disabled,t}))}var ue=s(65608);class me{constructor({context:e,events:t}){var s,r,a,n,i=this;this.requestMetaData={id:"",workspaceId:null},this.urlStore=void 0,this.status=void 0,this.connectionId=void 0,this.settings=void 0,this.handshakeError=void 0,this.messagesStore=void 0,this.requestMessageStore=void 0,this.headersStore=void 0,this.connectionStatistics=void 0,this.autoRunRequest=void 0,this.resetConnection=()=>{this.status=j.JW,this.connectionId=""},this.setStatus=e=>{this.status=e},this.addMessage=e=>{this.messagesStore.addMessage(e)},this.setConnectionStatistics=e=>{this.connectionStatistics=e},this.prepareConnection=()=>{this.resetConnection(),this.connectionId=(0,f.v4)(),this.handshakeError=!1,this.messagesStore.reset(),this.setConnectionStatistics({}),this.setStatus(j.BS),this.messagesStore.setStreamStatus(j.Ui.Ready)},this.wsConnect=async function(){if(!i.urlStore.url||i.status!==j.JW)return;K.AnalyticsService.addEventV2({category:"ws-raw",action:"send-request",label:"ws-workbench",value:1}),i.prepareConnection();const e=await async function(e){const t=P(e.headers);return{url:e.url,headers:t,protocols:H(t),options:D(e.settings)}}({url:i.urlStore.url,settings:(0,x.toJS)(i.settings),headers:(0,x.toJS)(i.headersStore.userHeaders)}),t=((e,t,s)=>(0,I.connectWebSocketViaAgent)(e,t,s))(i.connectionId,e,{variables:{},onOpen:({request:e,response:t})=>{i.setStatus(j.nm),i.setConnectionStatistics({connectedOn:(0,k.format)(new Date,"MMM do yyyy,  HH:mm")}),ue.pmConsole.logRequest({request:e,response:t});const s=O(j.Ax.CONNECTED,{handshakeDetails:q(e,t)},{preview:Z(j.Ax.CONNECTED,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:j.vi});i.addMessage(s)},onUpgrade:()=>{},onMessage:({message:e,meta:t})=>{if(!e)return;e&&e instanceof ArrayBuffer&&(e=new Uint8Array(e));const s=O(j.Ax.INCOMING,e,{preview:Z(j.Ax.INCOMING,{message:e,mimeType:t.mimeType}),time:new Date(t.timestamp).toISOString(),size:t.size,mimeType:t.mimeType,fileExtension:t.ext});i.addMessage(s)},onReconnect:()=>{i.setStatus(j.wf)},onEnd:({code:e,reason:s,aborted:r})=>{let a;t&&t(),r?a=O(j.Ax.ABORT,null,{preview:Z(j.Ax.ABORT,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:j.gf}):i.handshakeError||(a=O(j.Ax.DISCONNECTED,function(e,t){if(!e)return null;const s=j.Zs[e];return s?{code:e,name:s.name,description:t||s.description}:j.Zs.unknown(e,t)}(e,s),{preview:Z(j.Ax.DISCONNECTED,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:j.gf})),a&&i.addMessage(a);const n=(e=>{const t=(0,x.toJS)({id:null,type:j.HI.RAW,title:"Untitled WebSocket Request",payload:{url:e.urlStore.url,headers:ce(e.headersStore.userHeaders),queryParams:ce(e.urlStore.queryParams),settings:e.settings},extensions:{documentation:{content:""}}});return{workspaceId:e.requestMetaData.workspaceId,url:(0,x.toJS)(e.urlStore.url),item:t}})(i),o=function(e){const t=[],s={result:"success",summary:"Normal Closure"};for(const r of(0,x.toJS)(e.messagesStore.messages)){const e=j.Fx[r.type];if(!e)continue;const a=(0,ie[r.type])(r,s);t.push((0,d.Z)({},a,{type:e}))}return t.push(s),t}(i);(0,N.createWsRawHistory)([n,...o]).catch((()=>{})),i.resetConnection()},onError:({error:e,request:t,response:s})=>{const r=e&&(e.data||e.message)||"Socket connection error. Please try again.",a=O(j.Ax.ERROR,{error:r,handshakeDetails:q(t,s)},{preview:Z(j.Ax.ERROR,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:j.vi});i.addMessage(a),i.handshakeError=!0}})},this.wsDisconnect=()=>{var e;this.connectionId&&(this.setStatus(j.fv),e=this.connectionId,(0,I.disconnectWebSocketViaAgent)(e))},this.wsSend=async function(){i.connectionId||i.status!==j.JW||(i.wsConnect(),await new Promise((e=>{if(i.status===j.nm)return e();const t=(0,x.reaction)((()=>i.status),(s=>{s===j.nm&&(t&&t(),e())}))})));const e=i.requestMessageStore.activeType,t=i.requestMessageStore.activeSubType;let s=i.requestMessageStore.message;if(e===M.POSTMAN_JSON)s=S()(s,{whitespace:!1});else if(e===M.BINARY)try{s=function(e,t){let s;if(t===C.BASE64){const t=e.split(/\r?\n/).map((e=>e.replace(/\s+/g,""))).filter(Boolean).map((e=>function(e){if(!/^([\d+/A-Za-z]{4})*([\d+/A-Za-z]{3}=|[\d+/A-Za-z]{2}==)?$/.test(e))throw new SyntaxError("Invalid Base64");return e}(e))).map((e=>T.Buffer.from(e,"base64")));s=T.Buffer.concat(t)}else{if(t!==C.HEX)throw new TypeError(`Unrecognized binary format: ${t}`);s=T.Buffer.from(function(e){if(!/^([\dA-Fa-f]{2})*$/.test(e))throw new SyntaxError("Invalid Hexadecimal");return e}(e.replace(/\s+/g,"")),"hex")}return new Uint8Array(s.buffer,s.byteOffset,s.length)}(s,t)}catch(e){if(e instanceof SyntaxError)return void(0,c.Am)({title:"Unable to send message",status:"error",description:e.message});throw e}const r=ArrayBuffer.isView(s)?(o=s,T.Buffer.from(o.buffer,o.byteOffset,o.byteLength).toString("base64")):s,a=T.Buffer.byteLength(s),n=j.Ey[e];var o,l,d,u,m;l=i.connectionId,d=r,u={messageType:e},m=()=>{const e=O(j.Ax.OUTGOING,s,{preview:Z(j.Ax.OUTGOING,{message:s,mimeType:n}),time:(new Date).toISOString(),size:a,mimeType:n});i.addMessage(e)},(0,I.sendWebSocketMessageViaAgent)(l,d,u,m)},this.requestMetaData={id:e.id,workspaceId:e.workspaceId},this.urlStore=new B(null==(s=e.item.payload)?void 0:s.url,null==(r=e.item.payload)?void 0:r.queryParams),this.headersStore=new V(null==(a=e.item.payload)?void 0:a.headers),this.settings=null==(n=e.item.payload)?void 0:n.settings,this.connectionStatistics={};const{messages:o,messagesStreamStatus:l}=function(e={},t=[]){const s=[];let r=j.Ui.Empty;for(const r of t){var a;const t=(0,f.v4)(),n=j.y_[r.type];if(!n)continue;const i=(0,le[r.type])(r,{url:null==(a=e.item.payload)?void 0:a.url},n);s.push((0,d.Z)({id:t},i))}return s.length>0&&(r=j.Ui.Ready),t.some((e=>void 0===e.payload))&&(r=j.Ui.Truncated),{messages:s,messagesStreamStatus:r}}(e,t)||{messages:[],messagesStreamStatus:j.Ui.Empty};this.messagesStore=new U(o,l),this.status=j.JW,this.connectionId="",this.handshakeError=!1,this.requestMessageStore=new W,this.autoRunRequest=e.item.autoRunRequest,(0,x.makeObservable)(this,{status:x.observable,setStatus:x.action,addMessage:x.action,resetConnection:x.action,prepareConnection:x.action,connectionStatistics:x.observable,setConnectionStatistics:x.action,isEditable:x.computed,autoRunRequest:!0})}get isEditable(){return this.status===j.JW}}var pe=s(52322);const he=a().createContext({}),ge=({children:e})=>{const{historyId:t}=(0,o.useParams)();if(!(0,o.useInRouterContext)())throw new Error("RequestEditorProvider must be used within a Router");const s=(()=>{const e=(0,b.useLoaderData)(),{workspaceId:t}=(0,o.useParams)();if(null!=e&&e.wsRawRequestData&&e.wsRawRequestData.length>0){var s,r;const t=e.wsRawRequestData,{context:n,events:i}={context:(a=t)[0],events:a.slice(1,-1),conclusion:a[a.length-1]};return(null==(s=n.item)||null==(s=s.payload)?void 0:s.queryParams)&&(n.item.payload.queryParams=de(n.item.payload.queryParams)),(null==(r=n.item)||null==(r=r.payload)?void 0:r.headers)&&(n.item.payload.headers=de(n.item.payload.headers)),{context:n,events:i}}var a;return{context:{workspaceId:t,id:"",item:{id:"",title:"Untitled WebSocket Request",type:j.HI.RAW,payload:{url:"",queryParams:[],headers:[],settings:j.gT}}}}})(),a=(0,r.useMemo)((()=>new me(s)),[t]);return(0,pe.jsx)(he.Provider,{value:a,children:e})},ye=()=>{const e=(0,r.useContext)(he);if(!e)throw new Error("useWsRequestStore should only be used inside WsRequestContext");return e},ve=()=>{const e=ye().urlStore;return{queryParams:e.queryParams,updateQueryParams:e.updateQueryParams.bind(e)}};let be;const xe=i().div(be||(be=(e=>e)`
  display: inline-flex;
  width: calc(0.5 * var(--spacing-m));
  height: calc(0.5 * var(--spacing-m));
  margin-left: var(--spacing-xs);
  border-radius: calc(0.5 * var(--spacing-m));
  background-color: var(--base-color-success);
`)),fe=()=>(0,pe.jsx)(xe,{"aria-label":"tab with active values","data-testid":"tab-indicator-dot"}),we=(0,v.observer)((()=>{const{queryParams:e}=ve();return(0,pe.jsxs)(pe.Fragment,{children:["Params",e.length>0&&(0,pe.jsx)(fe,{})]})}));we.displayName="observer(ParamsTabHeader)";const Se=()=>{const e=ye().headersStore;return{headers:e.headers,setHeaders:e.setHeaders.bind(e)}};let Te;const ke=i().span(Te||(Te=(e=>e)`
  padding: var(--spacing-zero) var(--spacing-xs);
  color: var(--content-color-success);
`)),je=(0,v.observer)((()=>{const{headers:e}=Se(),t=e.length>0?(0,pe.jsxs)(ke,{children:["(",e.length,")"]}):null;return(0,pe.jsxs)("div",{children:["Headers",t]})}));je.displayName="observer(HeadersTabHeader)";var Me=s(97082);const Ce=()=>({isEditable:ye().isEditable});let Ie;const Ne=i().div(Ie||(Ie=(e=>e)`
  display: flex;
  flex-direction: column;
  justify-content: center;
  box-sizing: border-box;
  height: ${0};
  font-size: ${0};
  color: ${0};
  font-weight: ${0};
  margin: var(--spacing-xs) var(--spacing-zero);
`),(e=>e.theme["size-m"]),(e=>e.theme["text-size-m"]),(e=>e.theme["content-color-secondary"]),(e=>e.theme["text-weight-medium"])),Ee=(0,v.observer)((()=>{const{queryParams:e,updateQueryParams:t}=ve(),{isEditable:s}=Ce();return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne,{children:"Query Params"}),(0,pe.jsx)(Me.KeyValueEditor,{tableName:"Query Params",allowedColumns:["key","value"],showColumns:["key","value"],values:e,onChange:t,disableSorting:!1,nonEditableKeys:!s,nonEditableValues:!s,nonEditableToggles:!s,disableBulkEdit:!0,disableMultilineKey:!0,disableMultilineValue:!0})]})}));var Re=s(80605),Ae=s(35736),Oe=s(43294),Ze=s(64691),_e=s(48263),Pe=s(59824),He=s(17282);const De={[M.TEXT]:j.v9[M.TEXT],[M.HTML]:j.v9[M.HTML],[M.POSTMAN_JSON]:j.v9[M.POSTMAN_JSON],[M.XML]:j.v9[M.XML]},qe=(0,v.observer)((e=>{const t=e.languageMap||De,s=a().useRef(null);return(0,pe.jsxs)(Ze.Z,{children:[(0,pe.jsx)(_e.Z,{ref:s,text:t[e.activeLanguage],type:"tertiary"}),(0,pe.jsx)(Pe.Z,{children:Object.entries(t).map((t=>{const s=t[0],r=t[1];return(0,pe.jsx)(He.Z,{refKey:s,onClick:()=>{null==e.onChange||e.onChange(s)},children:(0,pe.jsx)("span",{children:r})},s)}))})]})}));qe.displayName="observer(WebSocketMessageLanguageSelector)";const Le=()=>ye().status,ze=()=>{const e=ye().urlStore;return{url:e.url,setUrl:e.setUrl.bind(e)}},Ue=()=>ye().wsSend;var Fe=s(949);const Be=e=>{const[t,...s]=e.split("/"),r=`./${s.join("/")}`,a=t.replaceAll("-","_"),n=`${window.BASE_URL_PREFIX}/${t}/remoteEntry.js`,i=n.split("/").slice(0,-1).join("/");return async()=>await(0,Fe.importRemote)({url:i,scope:a,module:r,remoteEntryFileName:n.split("/").pop()})},We=new Set(["Alt","Meta","Control","Shift"]);var Ge=s(89886);const $e="request-send-button-paint-time",Je="ws-message-code-editor-paint-time",Xe="request-send-button-paint-mark",Ve="ws-message-code-editor-paint-mark";let Ke,Ye,Qe,et,tt,st=e=>e;const{PerfContext:rt}=Ge.perfComponents,at=()=>{performance.measure(Je,{},Ve),(0,Ge.sendMeasureEvent)({name:Je})},nt={[j.wr.TEXT]:j.v9[j.wr.TEXT],[j.wr.POSTMAN_JSON]:j.v9[j.wr.POSTMAN_JSON],[j.wr.XML]:j.v9[j.wr.XML],[j.wr.HTML]:j.v9[j.wr.HTML],[j.wr.BINARY]:j.v9[j.wr.BINARY]},it={[j.HB.BASE64]:j.v9[j.HB.BASE64],[j.HB.HEX]:j.v9[j.HB.HEX]},ot=new Set([j.wr.TEXT,j.wr.BINARY]),lt=(0,r.lazy)(Be("code-editor/CodeEditor")),ct=i().div(Ke||(Ke=st`
  display: flex;
  flex: 1;
  flex-direction: column;
  height: 100%;
  width: 100%;
  margin-right: var(--spacing-s);
`)),dt=i().div(Ye||(Ye=st`
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding-top: var(--spacing-l);
  align-items: center;
  justify-content: center;

  /* If the editor container is shrunk, the text-editor was not getting resized
   * accordingly in Firefox. This fixes the resizing issue.
   */
  min-height: 0;

  .text-editor .monaco-editor {
    .margin-view-overlays .line-numbers {
      color: var(--content-color-tertiary);
    }

    .monaco-placeholder {
      font-size: var(--text-size-m);
      line-height: var(--line-height-m);
      color: var(--content-color-tertiary);
    }
  }
`)),ut=i().div(Qe||(Qe=st`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-s) var(--spacing-zero);
  border-top: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
`)),mt=i().div(et||(et=st`
  display: flex;
  align-items: center;
`)),pt=i()(Re.Z)(tt||(tt=st`
  background-color: ${0};
  font-size: var(--text-size-m);
  font-weight: var(--text-weight-medium);
  color: ${0};

  &:hover,
  &.is-hovered {
    background-color: ${0};
  }
`),(e=>"primary"===e.type?"var(--base-color-info)":"var(--highlight-background-color-secondary)"),(e=>"primary"===e.type?"var(--content-color-constant)":"var(--content-color-secondary)"),(e=>"primary"===e.type?"var(--highlight-background-color-info)":"var(--highlight-background-color-tertiary)")),ht=(0,v.observer)((()=>{const e=(0,r.useRef)(null),[t,s]=(0,r.useState)(null),{requestMessage:a,setRequestMessage:n}=(()=>{const e=ye().requestMessageStore;return{requestMessage:e.message,setRequestMessage:e.setMessage.bind(e)}})(),{activeType:i,setActiveType:o}=(()=>{const e=ye().requestMessageStore;return{activeType:e.activeType,setActiveType:e.setActiveType.bind(e)}})(),{activeSubType:l,setActiveSubType:c}=(()=>{const e=ye().requestMessageStore;return{activeSubType:e.activeSubType,setActiveSubType:e.setActiveSubType.bind(e)}})(),d=(e=>e===j.wr.BINARY)(i),u=Ue();return(({ctrlKey:e,shiftKey:t,altKey:s,keys:a,callback:n,bindingElementRef:i})=>{const o=(0,r.useRef)([]),l=(0,r.useRef)(!1),c=(0,r.useRef)(!1),d=(0,r.useRef)(!1),u=(0,r.useRef)(null),m=(0,r.useRef)(n);m.current=n,(0,r.useEffect)((()=>{const r=r=>{if((r.ctrlKey||r.metaKey)&&(l.current=!0),r.shiftKey&&(c.current=!0),r.altKey&&(d.current=!0),!We.has(r.key)&&Array.isArray(a)){const e=a.findIndex((e=>e.toLowerCase()===r.key.toLowerCase()));-1!==e&&(o.current[e]=r.key)}const n=!e||l.current,i=!t||c.current,p=!s||d.current;if(u.current=setTimeout((()=>{l.current=!1,c.current=!1,d.current=!1,o.current=[]}),250),n&&i&&p){if(Array.isArray(a)&&((e,t)=>{let s=0;for(const a of e){var r;if(a.toLowerCase()!==(null==(r=t[s])?void 0:r.toLowerCase()))return!1;s++}return!0})(a,o.current))return m.current();if(a===r.key)return m.current()}},n=null!=i?i:window;return n.addEventListener("keydown",r),()=>{n.removeEventListener("keydown",r),u.current&&clearTimeout(u.current)}}),[e,t,s,a,i])})({ctrlKey:!0,keys:"Enter",callback:()=>{u()},bindingElementRef:t}),(0,pe.jsxs)(ct,{children:[(0,pe.jsx)(dt,{ref:s,children:(0,pe.jsx)(r.Suspense,{fallback:(0,pe.jsx)(Ae.Z,{}),children:(0,pe.jsx)(rt.Provider,{value:{markName:Ve,callback:at},children:(0,pe.jsx)(lt,{ref:e,fontSize:12,placeholder:"Compose message",language:d?l:i,wordWrap:!0,value:a,onChange:n,autoFormat:!0,showNonPrintableCharacters:!0})})})}),(0,pe.jsxs)(ut,{children:[(0,pe.jsxs)(mt,{children:[(0,pe.jsx)(qe,{languageMap:nt,activeLanguage:i,onChange:e=>o(e)}),d&&(0,pe.jsx)(qe,{languageMap:it,activeLanguage:l,onChange:e=>c(e)}),!ot.has(i)&&(0,pe.jsx)(Re.Z,{onClick:()=>{var t;return null==(t=e.current)?void 0:t.beautifyContent()},type:"tertiary",icon:(0,pe.jsx)(Oe.Z,{}),tooltip:"Beautify"})]}),(0,pe.jsx)(gt,{})]})]})}));ht.displayName="observer(WsRequestMessagesPanel)";const gt=(0,v.observer)((()=>{let e;const t=Le(),{url:s}=ze(),r=Ue(),{isDisabled:a,reason:n}=function(e){let t;return{isDisabled:Boolean(_(e)&&(t=j.pU.emptyURL)),reason:t}}(s),i=a&&(e=n)||t!==j.nm&&t!==j.JW,o=e;return(0,pe.jsx)(pt,{type:t===j.nm?"primary":"secondary",text:"Send",onClick:r,tooltip:o,isDisabled:i})}));gt.displayName="observer(SendButton)";var yt=s(33105),vt=s(36166);let bt;const xt=i()(l.Z)(bt||(bt=(e=>e)`
  box-sizing: border-box;
  height: var(--size-m);
  font-size: var(--text-size-m);
  color: var(--content-color-secondary);
  font-weight: var(--text-weight-medium);
  margin: var(--spacing-xs) var(--spacing-zero);
`)),ft=(0,v.observer)((()=>{const{headers:e,setHeaders:t}=Se(),{isEditable:s}=Ce(),{previewHeaders:a}={previewHeaders:ye().headersStore.previewHeaders},{previewHeadersHidden:n,setPreviewHeadersHidden:i}=(()=>{const e=ye().headersStore;return{previewHeadersHidden:e.previewHeadersHidden,setPreviewHeadersHidden:e.setPreviewHeadersHidden}})(),o=(0,r.useMemo)((()=>new Set(a.map((e=>null==e?void 0:e.key)))),[a]),l=(0,r.useMemo)((()=>n?e.filter((e=>!o.has(e.key))):e),[e,a,n]),c=n?{text:`${a.length} hidden`,icon:(0,pe.jsx)(yt.Z,{}),tooltip:"These headers will be automatically added and sent with the request. Click to view and modify these headers."}:{text:"Hide auto-generated headers",icon:(0,pe.jsx)(vt.Z,{}),tooltip:"Click to hide these headers. They will still be automatically added and sent with the request."};return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsxs)(xt,{alignItems:"center",gap:"spacing-s",children:[(0,pe.jsx)("span",{role:"heading",children:"Headers"}),(0,pe.jsx)(Re.Z,(0,d.Z)({},c,{size:"small",onClick:()=>i(!n)}))]}),(0,pe.jsx)(Me.KeyValueEditor,{tableName:"Request Headers",allowedColumns:["key","value"],showColumns:["key","value"],values:l,onChange:t,disableSorting:!1,nonEditableKeys:!s,nonEditableValues:!s,nonEditableToggles:!s,disableBulkEdit:!0,disableMultilineKey:!0,disableMultilineValue:!0})]})}));ft.displayName="observer(WebSocketHeadersPanel)";var wt=s(49437),St=s(80047);let Tt;const kt=i()(l.Z)(Tt||(Tt=(e=>e)`
  overflow: hidden;
`));function jt({description:e}){return(0,pe.jsx)(kt,{direction:"column",height:"100%",justifyContent:"center",alignItems:"center",children:(0,pe.jsx)(wt.Z,{title:"Coming Soon",description:e,children:(0,pe.jsx)(St.Z,{name:"illustration-no-custom-domain"})})})}let Mt,Ct,It,Nt=e=>e;const Et=i()(u.PaneContent)(Mt||(Mt=Nt`
  box-sizing: border-box;
  width: 100%;
  overflow: auto;
`)),Rt=i()(m.Z)(Ct||(Ct=Nt`
  box-sizing: border-box;
  padding: ${0};
  width: 100%;
`),(e=>`${e.theme["spacing-zero"]} ${e.theme["spacing-s"]}`)),At=i()(m.Z)(It||(It=Nt`
  box-sizing: border-box;
  padding: ${0};

  /**
   * Following selectors help provide TabPanels height of the parent.
   */
  &,
  > div,
  > div > div {
    height: 100%;
  }
`),(e=>`${e.theme["spacing-zero"]} ${e.theme["spacing-s"]}`)),Ot=()=>(0,pe.jsx)(u.PaneHeader,{defaultLayout:"horizontal",horizontalComponent:null,verticalComponent:(0,pe.jsx)(u.PaneLabel,{layout:"vertical",label:"Request Editor",arrowDirection:"right"})}),Zt=()=>{const[e,t]=a().useState(0);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(_t,{activeTab:e,switchTab:t}),(0,pe.jsx)(Et,{children:(0,pe.jsx)(Pt,{activeTabIndex:e})})]})},_t=e=>(0,pe.jsx)(Rt,{activeTabIndex:e.activeTab,onChange:function(t){e.switchTab(t)},type:"primary",incrementallyCreateTabs:!0,destroyInactiveTabs:!0,children:(0,pe.jsxs)(p.Z,{children:[(0,pe.jsx)(h.Z,{label:"Message"}),(0,pe.jsx)(h.Z,{label:(0,pe.jsx)(we,{})}),(0,pe.jsx)(h.Z,{label:(0,pe.jsx)(je,{})}),(0,pe.jsx)(h.Z,{label:"Settings"})]})}),Pt=e=>(0,pe.jsx)(At,{activeTabIndex:e.activeTabIndex,incrementallyCreateTabs:!0,destroyInactiveTabs:!0,children:(0,pe.jsxs)(g.Z,{children:[(0,pe.jsx)(y.Z,{children:(0,pe.jsx)(ht,{})}),(0,pe.jsx)(y.Z,{children:(0,pe.jsx)(Ee,{})}),(0,pe.jsx)(y.Z,{children:(0,pe.jsx)(ft,{})}),(0,pe.jsx)(y.Z,{children:(0,pe.jsx)(jt,{description:"Support for Settings is coming soon."})})]})});var Ht=s(9460),Dt=s(22922),qt=s(44306),Lt=s(29706),zt=s(20856);let Ut;const Ft=i()(zt.ZP)(Ut||(Ut=(e=>e)`
  .tippy-content {
    background-color: var(--background-color-primary);
  }

  .tippy-svg-arrow > svg > path {
    fill: var(--background-color-primary);
  }
`)),Bt="http",Wt="ws-raw",Gt="grpc";let $t,Jt,Xt,Vt,Kt,Yt=e=>e;const Qt=i().div($t||($t=Yt`
  height: 24px;
  width: 24px;
  box-sizing: border-box;
`)),es=i()(Re.Z)(Jt||(Jt=Yt`
  height: 24px;
  width: 24px;
  background-color: var(--background-color-tertiary);
  border: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
  cursor: pointer;

  &:hover {
    background-color: var(--highlight-background-color-tertiary);
  }

  > i > svg > path {
    fill: ${0};
  }
`),(e=>e.theme[e.color])),ts=i().div(Xt||(Xt=Yt`
  padding-left: var(--spacing-s);
  padding-top: var(--spacing-xs);
`)),ss=i()(b.Link)(Vt||(Vt=Yt`
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: center;
  line-height: var(--line-height-xl);
  padding: var(--spacing-zero) var(--spacing-s);
  border-radius: var(--border-radius-default);

  &:hover {
    background-color: var(--background-color-tertiary);
  }

  color: var(--content-color-primary);
`)),rs=i().div(Kt||(Kt=Yt`
  margin-left: var(--spacing-s);
`)),as={[Bt]:{label:"HTTP",Icon:Dt.Z,iconColor:"content-color-success"},[Wt]:{label:"WebSocket",Icon:qt.Z,iconColor:"content-color-brand"},[Gt]:{label:"gRPC",Icon:Lt.Z,iconColor:"content-color-info"}},ns={[Bt]:"/request/create",[Wt]:"/ws-raw-request/create",[Gt]:"/grpc-request/create"},is=()=>{const e=(0,o.useParams)(),[t]=(0,b.useSearchParams)(),s=(0,o.useMatch)("/workspace/:workspaceId/:protocol/create"),[r,n]=a().useState(!1),i=t.get("requestId")||(0,f.v4)();if(!s)return(0,pe.jsx)(ts,{children:(0,pe.jsx)(qt.Z,{color:"content-color-brand","data-testid":"aether-icon-WebSocket"})});const l=(0,pe.jsx)(es,{type:"secondary",icon:(0,pe.jsx)(qt.Z,{"data-testid":"aether-icon-WebSocket"}),color:"content-color-brand",onClick:()=>n((e=>!e)),"data-testid":"protocol-switcher"});return(0,pe.jsx)(Qt,{children:(0,pe.jsx)(Ft,{trigger:l,isOpen:r,onClickOutside:()=>n(!1),children:Object.keys(as).map((t=>{const{label:s,Icon:r}=as[t];return(0,pe.jsxs)(ss,{to:`/workspace/${e.workspaceId}${ns[t]}?requestId=${i}`,sameTab:!0,onClick:()=>{K.AnalyticsService.addEventV2({category:"request",action:"switch-protocol",label:t}),n(!1)},children:[(0,pe.jsx)(r,{color:as[t].iconColor}),(0,pe.jsx)(rs,{children:s})]},t)}))})})};let os;const ls=i().div(os||(os=(e=>e)`
  display: flex;
  flex-direction: 'row';
  justify-content: space-between;
  box-sizing: border-box;
  height: 48px;
  padding: var(--spacing-s);
  border-bottom: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
`)),cs=(0,v.observer)((()=>{const{url:e}=ze(),t=(0,r.useMemo)((()=>e||"Untitled WebSocket Request"),[e]),{setTabTitle:s}=(0,u.useTabTitleMeta)();return(0,r.useEffect)((()=>{s(t,"ws-raw")}),[t]),(0,pe.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:"spacing-s",children:[(0,pe.jsx)(is,{}),(0,pe.jsx)(Ht.ZP,{color:"content-color-primary",type:"strong",children:t})]})}));cs.displayName="observer(MetaHeaderLeftSection)";const ds=()=>(0,pe.jsx)(ls,{role:"heading",children:(0,pe.jsx)(cs,{})});var us=s(68206);let ms,ps,hs,gs=e=>e;const{PerformanceMarkPaint:ys}=Ge.perfComponents,vs=i()(l.Z)(ms||(ms=gs`
  box-sizing: border-box;
  padding: var(--spacing-s);
`)),bs=i()(us.Z)(ps||(ps=gs`
  height: 40px;
  border-color: var(--border-color-default);

  &:focus-within {
    box-shadow: 0 0 0 2px var(--base-color-info);
    border-right: none;
    border: var(--border-width-default) var(--border-style-solid)
      var(--base-color-info);
  }

  background-color: var(--background-color-primary);
  color: var(--content-color-primary);
  box-shadow: ${0};
`),(e=>e.isDisabled&&"none")),xs=i()(Re.Z)(hs||(hs=gs`
  height: 40px;
  flex-shrink: 0;
  flex-basis: 100px;
  background-color: ${0};
  font-size: var(--text-size-l);
  font-weight: var(--text-weight-medium);
  color: ${0};

  &:hover,
  &.is-hovered {
    background-color: ${0};
  }
`),(e=>"primary"===e.type?"var(--base-color-info)":"var(--highlight-background-color-secondary)"),(e=>"primary"===e.type?"var(--content-color-constant)":"var(--content-color-secondary)"),(e=>"primary"===e.type?"var(--highlight-background-color-info)":"var(--highlight-background-color-tertiary)")),fs=(0,v.observer)((()=>{const{url:e,setUrl:t}=ze(),{isEditable:s}=Ce();return(0,pe.jsx)(bs,{placeholder:"Enter server URL",value:e,size:"small",onChange:e=>{t(e.target.value)},isDisabled:!s})}));fs.displayName="observer(RequestURLInput)";const ws=(0,v.observer)((()=>{var e;const t=Le(),s=(()=>{const{historyId:e}=(0,o.useParams)();return e?"history-request":"new-request"})(),a=j.Pk[t],n=null==(e=j.GP[a])?void 0:e.label,i=a===j.JD?ye().wsConnect:ye().wsDisconnect,{autoRunRequest:l}={autoRunRequest:ye().autoRunRequest};return(0,r.useEffect)((()=>{l&&i()}),[]),(0,pe.jsx)(ys,{markName:Xe,callback:()=>{return e=s,performance.measure($e,{},Xe),void(0,Ge.sendMeasureEvent)({name:$e,label:e,entityType:"ws-workbench"});var e},children:(0,pe.jsx)(xs,{type:a===j.JD?"primary":"secondary",text:(0,pe.jsx)("span",{id:"websocket-button-title","aria-label":"Connect WebSocket",children:n}),onClick:i})})}));ws.displayName="observer(SendButton)";const Ss=()=>(0,pe.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,pe.jsxs)(vs,{direction:"row",alignItems:"center",gap:"spacing-s",children:[(0,pe.jsx)(fs,{}),(0,pe.jsx)(ws,{})]})});var Ts=s(60949),ks=s(53723),js=s.n(ks),Ms=s(38725),Cs=s(83587),Is=s.n(Cs),Ns=s(95362);const Es=()=>{const e=ye().messagesStore;return{hiddenMessagesCount:e.firstVisibleMessageIndex,hasMessagesToRestore:e.hasMessagesToRestore,clearMessages:e.hideAllMessages,restoreMessages:e.restoreAllMessages}},Rs=(0,v.observer)((()=>{const{hiddenMessagesCount:e,restoreMessages:t}=Es();return(0,pe.jsxs)("div",{className:"websocket-hidden-messages",children:[(0,pe.jsxs)("div",{className:"websocket-hidden-messages__left-section",children:[(0,pe.jsx)(Ns.Z,{color:"content-color-primary",className:"websocket-hidden-messages__left-section__icon"}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:`${e} messages hidden`})]}),(0,pe.jsx)("div",{className:"websocket-hidden-messages__right-section",children:(0,pe.jsx)(Re.Z,{type:"secondary",text:"Restore",size:"small",onClick:t})})]})}));Rs.displayName="observer(WebSocketHiddenMessagesItem)";const As=Rs;var Os=s(58901),Zs=s.n(Os);const _s=()=>{const e=ye().messagesStore;return{isMessageSelected:e.isMessageSelected,toggleMessageSelected:e.toggleMessageSelected,deselectAllMessages:e.deselectAllMessages,selectedMessagesCount:e.selectedMessagesCount,selectedMessageDetailsList:e.selectedMessageDetailsList}},Ps=(0,v.observer)((()=>{const{selectedMessageDetailsList:e,deselectAllMessages:t}=_s(),s=(0,r.useMemo)((()=>{var t,s;if(e.length!==j.rr)return"Not available";const[r,a]=e,n=null==r||null==(t=r.meta)?void 0:t.time,i=null==a||null==(s=a.meta)?void 0:s.time;return n&&i?Zs()(Math.abs(new Date(n).getTime()-new Date(i).getTime())):"Not available"}),[e]);return(0,pe.jsxs)("div",{className:"message-relational-info-toolbar",children:[(0,pe.jsx)(Re.Z,{type:"muted-plain",text:"Deselect",onClick:t,className:"message-relational-info-toolbar__deselect"}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:`Time difference: ${s}`})]})}));Ps.displayName="observer(WebSocketMessageStreamProjectionArea)";const Hs=Ps;var Ds=s(37110),qs=s(20347),Ls=s(43088);const zs=()=>{const e=ye().messagesStore;return{isFilterApplied:e.isFilterApplied,filteredMessages:e.filteredMessagesByInputAndType}};let Us,Fs,Bs,Ws,Gs,$s=e=>e;const Js=i()(l.Z)(Us||(Us=$s`
  padding: var(--spacing-xs) var(--spacing-s);
  z-index: 1;
`)),Xs=i()(l.Z)(Fs||(Fs=$s`
  width: 240px;
  min-width: 100px;
`)),Vs=i().div(Bs||(Bs=$s`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-s);
  height: var(--controls-size-default);
`)),Ks=i()(l.Z)(Ws||(Ws=$s`
  margin-left: auto;
`)),Ys=i()(l.Z)(Gs||(Gs=$s`
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: var(--size-xs);
  min-width: var(--size-xs);
  background-color: ${0};
`),(e=>e.background&&`var(--${e.background})`)),Qs=(0,v.observer)((e=>{const{messageTypeFilter:t,setMessageTypeFilter:s}=(()=>{const e=ye().messagesStore;return{messageTypeFilter:e.messageTypeFilter,setMessageTypeFilter:e.setMessageTypeFilter.bind(e)}})(),{messageInputFilter:r,setMessageInputFilter:a}=(()=>{const e=ye().messagesStore;return{messageInputFilter:e.messageInputFilter,setMessageInputFilter:e.setMessageInputFilter.bind(e)}})(),{hasMessagesToRestore:n,clearMessages:i}=Es(),{filteredMessages:o}=zs(),c=e=>{const t=j.Re[e]||!1;if(!t)return;const{Icon:s,color:r,size:a,backgroundColor:n}=t;return(0,pe.jsx)(Ys,{background:n,children:(0,pe.jsx)(s,{color:r,size:a})})};return(0,pe.jsxs)(Js,{alignItems:"center",children:[(0,pe.jsxs)(l.Z,{wrap:"wrap",rowGap:"spacing-s",gap:"spacing-s",children:[(0,pe.jsx)(Xs,{alignItems:"center",children:(0,pe.jsx)(us.Z,{type:"search",placeholder:"Search",value:r,onChange:e=>{var t;return a(null==e||null==(t=e.target)?void 0:t.value)},onClear:()=>a(""),label:(0,pe.jsx)(Ds.Z,{text:"Search",isHidden:!0})})}),(0,pe.jsxs)(Ze.Z,{children:[(0,pe.jsx)(_e.Z,{type:"tertiary",text:(0,pe.jsxs)(l.Z,{gap:"spacing-xs",alignItems:"center",children:[c(e.model.messageTypeFilter),(0,pe.jsx)(Ht.ZP,{children:j.I0[t]})]})}),(0,pe.jsx)(Pe.Z,{children:Object.entries(j.I0).map((e=>{const t=e[0],r=e[1];return"addSeparator"===t?(0,pe.jsx)(qs.Z,{}):(0,pe.jsx)(He.Z,{onClick:()=>{s(t)},children:(0,pe.jsxs)(Vs,{children:[c(t),r]})},t)}))})]}),(0,pe.jsx)(Re.Z,{type:"tertiary",icon:(0,pe.jsx)(Ls.Z,{}),size:"medium",text:"Clear Messages",tooltip:"Clear Messages",onClick:i,isDisabled:_(o)&&n})]}),(0,pe.jsx)(Ks,{alignItems:"center",wrap:"wrap",children:e.children})]})}));Qs.displayName="observer(WebSocketMessageStreamControls)";const er=Qs,tr=(0,v.observer)((e=>{const{model:t,children:s}=e,{selectedMessagesCount:r}=_s();return r===j.rr?(0,pe.jsx)(Hs,{model:t}):(0,pe.jsx)(er,{model:t,children:s})}));tr.displayName="observer(WebSocketMessageStreamToolbar)";const sr=tr;let rr;const ar=i().div(rr||(rr=(e=>e)`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: 100%;
  overflow: hidden;
`)),nr=e=>(0,pe.jsx)(ar,{children:(0,pe.jsx)(wt.Z,{title:e.title,description:e.description,children:(0,pe.jsx)(St.Z,{name:e.illustration})})}),ir=(0,v.observer)((e=>e.model.messageStreamNotificationType?(0,pe.jsx)("div",{className:"websocket-stream__jump-to-latest",children:(0,pe.jsx)(Re.Z,{type:"tertiary",size:"small",text:e.model.messageStreamNotificationType===j.tg?"New messages":"Jump to latest",icon:(0,pe.jsx)(Ms.Z,{}),className:"websocket-stream__jump-to-latest__btn",onClick:e.handleJumpToLatest})}):null));ir.displayName="observer(Notification)";class or extends r.Component{constructor(e){super(e),this.state={retryCount:0},this.getItemSize=this.getItemSize.bind(this),this.getListItem=this.getListItem.bind(this),this.onItemsRendered=this.onItemsRendered.bind(this),this.handleJumpToLatest=this.handleJumpToLatest.bind(this)}componentDidMount(){this.newMessageNotificationReactionDisposer=(0,x.reaction)((()=>{var e;return null==(e=this.props.model.newMessages)?void 0:e.length}),(e=>{if(0===e)return this.props.model.set("messageStreamNotificationType",null);this.props.model.set("messageStreamNotificationType",j.tg)}))}componentWillUnmount(){this.newMessageNotificationReactionDisposer&&this.newMessageNotificationReactionDisposer()}onItemsRendered({visibleStartIndex:e}){var t;e<10||null!=(t=this.props.model.newMessages)&&t.length||this.props.model.set("messageStreamNotificationType",j.NI)}get emptyState(){return{error:{title:{text:"Couldnâ€™t load your messages."},message:{text:this.state.retryCount<3?"Just a faulty wire. Please try again.":"We are unable to load your messages due to unforeseen circumstances. Please try again later.",className:"stream-empty-state__message"},illustration:"illustration-unable-to-load",secondaryAction:(this.state.retryCount,{})},empty:{title:{text:"No messages yet"},message:{text:"Establish a connection to send and receive messages.",className:"stream-empty-state__message"},illustration:"illustration-connect-to-server"},truncated:{title:{text:"Response size is too large to display"},message:{text:"Could not save the response in the history because it was too large.",className:"stream-empty-state__message"},illustration:"illustration-unable-to-pull-request"}}}getMessageIndex(e){var t;return(null==(t=this.props.model.visibleItems)?void 0:t.length)-(e+1)}getItemSize(e){var t;const{id:s,type:r,payload:a}=(null==(t=this.props.model)?void 0:t.visibleItems[this.getMessageIndex(e)])||{};return this.props.isMessageExpanded(s)?r===j.Ax.ERROR||r===j.Ax.CONNECTED?a&&R(a.handshakeDetails)?73:281:r===j.Ax.DISCONNECTED?73:291:41}getListItem(e){var t;const s=null==(t=this.props.model)||null==(t=t.visibleItems)?void 0:t[this.getMessageIndex(e.index)];return s?s.type===j.Ax.HIDDEN?(0,pe.jsx)("div",{style:e.style,children:(0,pe.jsx)(As,{model:this.props.model})}):(0,pe.jsx)("div",{style:e.style,children:this.props.renderListItem(e.index,s)}):null}getList(){const e=e=>(0,pe.jsx)(v.Observer,{children:this.getListItem.bind(this,e)});return(0,pe.jsx)("div",{className:"websocket-stream__list",children:(0,pe.jsx)(Is(),{children:({height:t,width:s})=>(0,pe.jsx)(v.Observer,{children:()=>{var r;return(0,pe.jsx)(Ts.VariableSizeList,{height:t,width:s,itemSize:this.getItemSize,itemCount:null==(r=this.props.model.visibleItems)?void 0:r.length,overscanCount:5,ref:e=>{this.listRef=e},onItemsRendered:this.onItemsRendered,children:e})}})})})}handleResetHeight(e){!_(this.listRef)&&this.listRef.resetAfterIndex(e)}handleJumpToLatest(e){e&&e.stopPropagation(),!_(this.listRef)&&this.listRef.scrollToItem(0)}renderContent(){return this.props.isFilterApplied&&_(this.props.filteredMessages)?(0,pe.jsx)(nr,{title:"No messages found",description:"Try again using a different keyword or filter.",illustration:"illustration-no-report"}):(0,pe.jsxs)(r.Fragment,{children:[(0,pe.jsx)(ir,{model:this.props.model,handleJumpToLatest:this.handleJumpToLatest}),this.getList()]})}render(){if(this.props.model.messageStreamStatus===j.Ui.Loading)return(0,pe.jsx)(Ae.Z,{className:"websocket-stream-loader"});let e;switch(this.props.model.messageStreamStatus){case j.Ui.Error:e="error";break;case j.Ui.Empty:e="empty";break;case j.Ui.Truncated:e="truncated"}if(e&&this.emptyState[e]){const{title:t,message:s,illustration:r}=this.emptyState[e];return(0,pe.jsx)(nr,{title:null==t?void 0:t.text,description:null==s?void 0:s.text,illustration:r})}return(0,pe.jsxs)("div",{className:js()("websocket-stream",this.props.className),children:[(0,pe.jsx)(sr,{model:this.props.model,ref:e=>{this.toolbarRef=e},children:this.props.toolbarExtras}),this.renderContent()]})}}var lr=s(42827),cr=s.n(lr),dr=s(74962),ur=s(81397),mr=s(65848),pr=s(24867),hr=s(25710),gr=s(56415),yr=s(45261),vr=s(97376),br=s(83125),xr=s(32054);const fr=(0,r.lazy)(Be("code-editor/CodeEditor"));function wr(e){var t,s,a;const[n,i]=(0,r.useState)(null==(t=e.initialState)?void 0:t.activeLanguage),[o,l]=(0,r.useState)(null==(s=e.initialState)?void 0:s.hexMode),[c,d]=(0,r.useState)(null==(a=e.initialState)?void 0:a.lineWrap),u=(0,r.useRef)(null),m=e=>{i(e),l(!1)},p=()=>{var e;u.current&&(null==(e=u.current)||e.prettify())},h=()=>{d((e=>!e))},g=()=>{var e;u.current&&(null==(e=u.current)||e.toggleFindWidget())},y=()=>{l((e=>!e))},{message:v,viewer:b}=function(e,t,s){let r,a;return j.hD[j.Bg].has(t.split("/")[0].toLowerCase())?(a=j.Bg,r=e):j.hD[j.Uw].has(t)?(a=j.Uw,r=s?(0,E.hexy)(e,A):e):(a=j.Uw,e instanceof ArrayBuffer&&(e=new Uint8Array(e)),r=s?(0,E.hexy)([...e],A):String.fromCodePoint(...e)),{message:r,viewer:a}}(e.message,e.mimeType,o);return b===j.Bg?null:((e,{autoFormat:t})=>{let s=n;return o?s=j.wr.HEXDUMP:R(n)&&(s=j.wr.TEXT),(0,pe.jsxs)("div",{className:"websocket-message-viewer__editor",children:[(0,pe.jsxs)("div",{className:js()({"websocket-message-viewer__editor__toolbar":!0,"is-binary":null===n}),children:[!R(n)&&(0,pe.jsxs)("div",{className:"websocket-message-viewer__editor__toolbar__section-l",children:[(0,pe.jsx)(qe,{onChange:m,activeLanguage:n}),(0,pe.jsx)(Re.Z,{onClick:h,type:"tertiary",icon:(0,pe.jsx)(br.Z,{}),tooltip:"Wrap Line",className:js()({"line-wrap-active":c}),isDisabled:o}),!t&&(0,pe.jsx)(Re.Z,{onClick:p,type:"tertiary",icon:(0,pe.jsx)(Oe.Z,{}),tooltip:"Beautify",isDisabled:o})]}),(0,pe.jsxs)("div",{className:"websocket-message-viewer__editor__toolbar__section-r",children:[(0,pe.jsx)(Re.Z,{onClick:y,type:"tertiary",text:o?"Show Message":"Show Hexdump"}),(0,pe.jsx)(Re.Z,{onClick:g,type:"tertiary",icon:(0,pe.jsx)(xr.Z,{}),tooltip:"Search"})]})]}),(0,pe.jsx)("div",{className:"websocket-message-viewer__editor__monaco-editor",children:(0,pe.jsx)(r.Suspense,{fallback:(0,pe.jsx)(Ae.Z,{}),children:(0,pe.jsx)(fr,{autoFormat:t,value:e,fontSize:12,language:s,wordWrap:c,readOnly:!0,ref:u,showNonPrintableCharacters:!0})})})]})})(v,{autoFormat:!0})}var Sr=s(37155);const Tr=s.n(Sr)()((async e=>{if(e){const e=await navigator.permissions.query({name:"clipboard-write"});return"granted"===e.state||"prompt"===e.state}return!1})),kr=()=>{const e=ye().messagesStore;return{isMessageExpanded:e.isMessageExpanded.bind(e),toggleMessageExpanded:e.toggleMessageExpanded.bind(e)}};let jr;const Mr=(0,r.lazy)((()=>s.e(4744).then(s.t.bind(s,44744,23)).then((e=>({default:e.CustomObjectInspector}))))),Cr=i()(pr.Z)(jr||(jr=(e=>e)`
  padding: var(--spacing-s);
`)),Ir=(0,v.observer)((e=>{var t,s,n;const[i,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),u=(0,r.useRef)(),{addToast:m}=(0,c.ZP)(),{isMessageExpanded:p,toggleMessageExpanded:h}=kr(),{isMessageSelected:g,toggleMessageSelected:y,selectedMessagesCount:v}=_s(),b=g(null==(t=e.message)?void 0:t.id),x=a().useRef();(0,r.useEffect)((()=>{var t;const s=u.current;null==(t=e.message)||null==(t=t.meta)||null==(t=t.preview)||!t.truncated||!s||s.clientWidth<s.scrollWidth||d(!0)}),[]);const f=e=>(e===j.Ax.OUTGOING||e===j.Ax.INCOMING)&&(i||b||v>0),w=()=>{var t;R(null==(t=e.message)?void 0:t.payload)||(h(e.message.id),e.handleResetHeight(e.index))},S=async()=>{var t;const s=null==(t=e.message)?void 0:t.payload;try{await(async e=>{e&&await Tr(!0)&&await navigator.clipboard.writeText(e)})(s),m({title:"Copied to clipboard",status:"success",description:null})}catch(e){if(m({title:"Unable to copy",status:"failed",description:null}),e instanceof Error)return(0,vr.logError)(e,{stack:e.stack,appId:"ws-workbench",errorElementId:"handle-copy-message"})}},T=(t,s={},r)=>{var a;const{time:n,size:o,mimeType:l}=s,c=function(e){const t=e?new Date(e):new Date;return(0,k.format)(t,"HH:mm:ss")}(n);let d=null;R(null==(a=e.message)?void 0:a.payload)||(d=e.cachedExpandedState?(0,pe.jsx)(hr.Z,{size:"large",color:"content-color-primary"}):(0,pe.jsx)(gr.Z,{size:"large",color:"content-color-primary"}));let u=null;const m=c?(0,pe.jsx)("div",{className:"websocket-stream-item__header__right-section__time",children:(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-secondary",children:c})}):null;if(!i||t!==j.Ax.OUTGOING&&t!==j.Ax.INCOMING)u=m;else{var p;const t=!j.gY.has(l)||R(null==(p=e.message)?void 0:p.payload)||!r;u=(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsxs)("div",{className:"websocket-stream-item__header__right-section__quick-actions",onClick:e=>e.stopPropagation(),children:[(0,pe.jsx)(Re.Z,{onClick:S,type:"tertiary",icon:(0,pe.jsx)(yr.Z,{}),isDisabled:t,tooltip:(0,pe.jsx)(ur.Z,{content:t?"Can't copy this message":"Copy message",placement:"bottom"}),"data-testid":"copy-message-button"}),(0,pe.jsx)("div",{"data-testid":"message-info-icon",children:(0,pe.jsx)(Cr,{color:"content-color-secondary",ref:x})}),(0,pe.jsx)(ur.Z,{triggerRef:x,content:(0,pe.jsxs)("div",{className:"websocket-stream-info-tooltip",children:[(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:`Size: ${cr()(o)}`}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:`Time: ${c}`}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:`MIME Type: ${l}`})]}),placement:"bottom-start"})]}),m]})}return(0,pe.jsxs)("div",{className:"websocket-stream-item__header__right-section",children:[u,d]})};return(0,pe.jsxs)("div",{className:(M=null==(s=e.message)?void 0:s.type,js()({"websocket-stream-item":!0,"server-message":M===j.Ax.INCOMING,"client-message":M===j.Ax.OUTGOING,"no-body":R(null==(C=e.message)?void 0:C.payload)})),"data-testid":"websocket-response-message",children:[(()=>{const{type:t,meta:s,payload:r}=e.message||{},a=j.Re[t]||j.Re.default||{},n="function"==typeof a?a((null==r?void 0:r.code)===j.aS):a,{Icon:c,color:d,size:m}=n||{};let p;var h;return s&&(p="string"==typeof s.preview?s.preview:null==(h=s.preview)?void 0:h.text),(0,pe.jsxs)("div",{className:js()({"websocket-stream-item__header":!0,"is-hovered":i,"is-selected":e.isSelected}),onClick:w,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,pe.jsxs)("div",{className:"websocket-stream-item__header__left-section",ref:u,children:[f(t)&&(0,pe.jsx)("div",{className:"websocket-stream-item__header__left-section__checkbox",onClick:e=>null==e?void 0:e.stopPropagation(),children:(0,pe.jsx)(mr.Z,{isChecked:b,onChange:()=>{var t;return y(null==(t=e.message)?void 0:t.id)},isDisabled:!b&&v===j.rr,"data-testid":"message-select-checkbox"})}),c&&d&&(0,pe.jsx)("div",{className:"websocket-stream-item__header__left-section__type-icon",children:(0,pe.jsx)(c,{color:d,size:m})}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",className:js()({"websocket-stream-item__header__left-section__message":!0,"add-ellipsis":l}),color:s.preview.placeholder?"content-color-secondary":"content-color-primary",children:p})]}),T(t,s,r)]})})(),p(null==(n=e.message)?void 0:n.id)&&(()=>{var t;const{type:s,meta:a,payload:n}=e.message||{};if(R(null==(t=e.message)?void 0:t.payload))return null;let i;switch(s){case j.Ax.OUTGOING:case j.Ax.INCOMING:{const e=j.OX[a.mimeType],t={activeLanguage:e||j.wr.TEXT,lineWrap:!1,hexMode:!1};e===j.wr.HEXDUMP&&Object.assign(t,{activeLanguage:null,hexMode:!0}),i=(0,pe.jsx)("div",{className:"websocket-stream-item__body__message-body-viewer",children:(0,pe.jsx)(wr,{message:n,mimeType:a.mimeType,initialState:t})});break}case j.Ax.CONNECTED:case j.Ax.ERROR:i=(({error:e,handshakeDetails:t})=>(0,pe.jsxs)("div",{className:js()({"websocket-stream-item__body__obj-inspector":!0,"no-details":R(t)}),children:[e&&(0,pe.jsxs)("div",{className:"websocket-stream-item__body__obj-inspector__error",children:[(0,pe.jsx)(Ht.ZP,{type:"strong",children:"Error:"}),(0,pe.jsx)("span",{children:" "}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:e})]}),t&&(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(dr.Z,{type:"h6",text:"Handshake Details",color:"content-color-secondary"}),(0,pe.jsx)(r.Suspense,{fallback:(0,pe.jsx)(pe.Fragment,{children:" "}),children:(0,pe.jsx)(Mr,{data:t})})]})]}))(n);break;default:i=(e=>{const{code:t,name:s,description:r}=e||{};return(0,pe.jsxs)("div",{className:"websocket-stream-item__body__plain-text",title:r,children:[(0,pe.jsx)(Ht.ZP,{type:"strong",children:`${t} ${s}:`}),(0,pe.jsx)("span",{children:" "}),(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-secondary",className:"websocket-stream-item__body__plain-text__description",children:r})]})})(n)}return(0,pe.jsx)("div",{className:"websocket-stream-item__body",children:i})})()]});var M,C}));Ir.displayName="observer(RawWebSocketMessageStreamItem)";const Nr=Ir,Er=(0,v.observer)((e=>{const{streamStatus:t,setStreamStatus:s}=(()=>{const e=ye().messagesStore;return{streamStatus:e.streamStatus,setStreamStatus:e.setStreamStatus.bind(e)}})(),{isMessageExpanded:a}=kr(),{isFilterApplied:n,filteredMessages:i}=zs(),o=(0,r.useRef)(null),l={visibleItems:e.messages,messageStreamStatus:t,setStreamStatus:s,set:()=>{}};return(0,r.useEffect)((()=>{var e;null==(e=o.current)||e.handleResetHeight(0)}),[e.messages.length]),(0,pe.jsx)(or,{ref:o,model:l,renderListItem:(e,t)=>(0,pe.jsx)(Nr,{index:e,message:t,handleResetHeight:e=>{var t;null==(t=o.current)||t.handleResetHeight(e)}},t.id),isMessageExpanded:a,isFilterApplied:n,filteredMessages:i})}));Er.displayName="observer(RawWebSocketMessageStream)";let Rr,Ar,Or,Zr,_r,Pr,Hr,Dr,qr,Lr,zr=e=>e;const Ur=i()(l.Z)(Rr||(Rr=zr`
  flex: 1;
  height: var(--size-m);
  margin: var(--spacing-zero) var(--spacing-s) var(--spacing-zero)
    var(--spacing-s);
`)),Fr=i().div(Ar||(Ar=zr`
  cursor: pointer;
  user-select: none;
`)),Br=i().div(Or||(Or=zr`
  display: flex;
  margin-left: var(--spacing-l);
  cursor: pointer;
`)),Wr=i()(l.Z)(Zr||(Zr=zr`
  cursor: default;
`)),Gr=i().div(_r||(_r=zr`
  width: 240px;
`)),$r=i().div(Pr||(Pr=zr`
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: var(--size-s);
  margin-top: var(--spacing-xs);

  &:first-child {
    margin-top: unset;
  }
`)),Jr=i()(dr.Z)(Hr||(Hr=zr`
  color: var(--content-color-secondary);
`)),Xr=i().div(Dr||(Dr=zr`
  width: 60%;
  display: flex;
  color: var(--content-color-primary);

  span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`)),Vr=i().div(qr||(qr=zr`
  display: flex;
  align-items: center;
  gap: var(--spacing-s);
`)),Kr=i().div(Lr||(Lr=zr`
  display: inline-flex;
  width: 8px;
  height: 8px;
  margin-left: var(--spacing-xs);
  background-color: ${0};
  border-radius: 8px;
`),(({status:e})=>{switch(e){case"success":return"var(--base-color-success)";case"info":return"var(--base-color-warning)";case"critical":return"var(--base-color-error)";default:return"inherit"}})),Yr=e=>{const{label:t,value:s}=e;return t&&s?(0,pe.jsxs)($r,{children:[(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-secondary",children:t}),(0,pe.jsx)(Xr,{title:s,children:(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-primary",children:s})})]}):null},Qr=e=>{if(!e.section)return null;const{section:t,dataFields:s}=e.section;return(0,pe.jsxs)(Gr,{children:[t&&(0,pe.jsx)($r,{children:(0,pe.jsx)(Jr,{type:"h5",color:"content-color-secondary",text:t})}),s.map((({key:t,label:s})=>{var r;const a=null==(r=e.statistics)?void 0:r[t];return(0,pe.jsx)(Yr,{label:s,value:a},t)}))]})},ea=(0,v.observer)((e=>{const[t,s]=(0,r.useState)(!1),a=(0,r.useRef)(null),n=Le(),i=ye().connectionStatistics,{label:o,type:c}=j.D6[n]||{};return(0,pe.jsxs)(Ur,{alignItems:"center",justifyContent:"space-between","data-testid":"response-pane-header",children:[(0,pe.jsx)(Fr,{onClick:e.onClick,children:(0,pe.jsx)(dr.Z,{type:"h5",text:e.label,color:"content-color-primary"})}),(0,pe.jsxs)(l.Z,{alignItems:"center",children:[o&&c&&(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Wr,{alignItems:"center",gap:"spacing-xs",children:(0,pe.jsxs)(Vr,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),ref:a,children:[(0,pe.jsx)(Kr,{status:c}),(0,pe.jsx)(Ht.ZP,{children:o})]})}),!_(i)&&(0,pe.jsx)(zt.ZP,{placement:"bottom",triggerRef:a,isOpen:t,children:(0,pe.jsx)(Qr,{section:j.up,statistics:i})})]}),(0,pe.jsx)(Br,{onClick:e.onClick,children:(()=>{const t=e.isPaneCollapsed?hr.Z:gr.Z;return(0,pe.jsx)(t,{color:"content-color-tertiary"})})()})]})]})})),ta=e=>{const[t,s]=a().useState(!1);return(0,pe.jsx)(u.PaneHeader,{defaultLayout:"horizontal",horizontalComponent:(0,pe.jsx)(ea,{label:"Response",onClick:()=>{s((e=>!e)),e.handlePaneCollapseToggle()},layout:"horizontal",isPaneCollapsed:t}),verticalComponent:(0,pe.jsx)(u.PaneLabel,{layout:"vertical",label:(0,pe.jsx)(Ht.ZP,{type:"body-medium",color:"content-color-secondary",children:"Response"}),arrowDirection:"left"})})},sa=(0,v.observer)((()=>{const e=ye().messagesStore.messagesToShow;return(0,pe.jsx)(Er,{messages:e})}));sa.displayName="observer(ResponsePaneContent)";const ra={default:200,collapsed:33,uncollapsed:400,min:100,resizableByDefault:!0},aa=(0,d.Z)({},ra,{uncollapsed:200}),na={default:400,collapsed:33,uncollapsed:400,min:300,resizableByDefault:!0},ia=()=>{const e=a().useRef(null);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(ds,{}),(0,pe.jsx)(Ss,{}),(0,pe.jsxs)(u.PaneGroup,{defaultLayout:"vertical",scrollToResize:!0,children:[(0,pe.jsxs)(u.Pane,{height:ra,width:na,resizableByDefault:!0,children:[(0,pe.jsx)(Ot,{}),(0,pe.jsx)(Zt,{})]}),(0,pe.jsxs)(u.Pane,{height:aa,width:na,resizableByDefault:!0,ref:e,children:[(0,pe.jsx)(ta,{handlePaneCollapseToggle:()=>{var t;null==(t=e.current)||t.handleCollapseToggle("y")}}),(0,pe.jsx)(sa,{})]})]})]})},oa=()=>(0,pe.jsx)(jt,{description:"Support for Socket.IO request is coming soon"});let la;const ca=i()(l.Z)(la||(la=(e=>e)`
  height: var(--wp-workbench-height);
  width: 100vw;
  min-width: 600px;
  max-width: 100%;
  background-color: var(--background-color-primary);
  color: var(--content-color-primary);
`)),da=()=>{var e;const t="ws-socketio-request"===(null==(e=(0,o.useMatch)("/workspace/:workspaceId/:protocol/create"))||null==(e=e.params)?void 0:e.protocol)?oa:ia,{historyId:s}=(0,o.useParams)();return(0,r.useEffect)((()=>{s&&K.AnalyticsService.addEventV2({category:"ws-raw",action:"open-tab",label:"history",value:1})}),[]),(0,pe.jsx)(ge,{children:(0,pe.jsx)(c.VW,{children:(0,pe.jsx)(ca,{direction:"column",children:(0,pe.jsx)(t,{})})})})}}}]);
//# sourceMappingURL=8442.d94b2470a4864c84.js.map